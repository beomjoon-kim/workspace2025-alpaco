# 01_test.py  â€” Streamlit ê¸°ë³¸ ë¬¸ë²•ì„ "ìƒí˜¸ì‘ìš©" ì¤‘ì‹¬ìœ¼ë¡œ ìµíˆëŠ” ì˜ˆì œ
# í¬ì¸íŠ¸: í…ìŠ¤íŠ¸/ë§ˆí¬ë‹¤ìš´/ìˆ˜ì‹/ì½”ë“œ/ë ˆì´ì•„ì›ƒ/ì…ë ¥ ìœ„ì ¯ì„ í•œ í™”ë©´ì—ì„œ ì²´í—˜

import time
import numpy as np
import pandas as pd
import streamlit as st

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# í˜ì´ì§€ ë©”íƒ€ & ì‚¬ì´ë“œë°”
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(page_title="Streamlit Quick Tour", page_icon="ğŸ§­", layout="centered")

with st.sidebar:
    st.header("ğŸ”§ ì‹¤ìŠµ ì˜µì…˜")
    username = st.text_input("ì´ë¦„(ì„ íƒ)", placeholder="í™ê¸¸ë™")
    demo_speed = st.slider("ì• ë‹ˆë©”ì´ì…˜ ì†ë„", 0.05, 0.5, 0.15, 0.05)
    show_tips = st.checkbox("í•™ìŠµ íŒ í‘œì‹œ", value=True)
    st.caption("â€» ì‚¬ì´ë“œë°” ê°’ì´ ë³¸ë¬¸ êµ¬ì„±ì— ë°˜ì˜ë©ë‹ˆë‹¤.")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# í—¤ë” & ì¸ì‚¿ë§
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
title = "Streamlit í•µì‹¬ ê¸°ëŠ¥ ë§›ë³´ê¸°"
st.title(f"ğŸ§ª {title}")
st.caption("í•œ íŒŒì¼ë¡œ ì¸í„°ë™í‹°ë¸Œ ì›¹ì•±ì„ ë§Œë“œëŠ” ë²•ì„ 5ë¶„ ë§Œì— ìµí˜€ë´…ì‹œë‹¤!")

hello = f"{username}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‘‹" if username else "í•™ìŠµìë‹˜, í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‘‹"
st.success(hello)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 1) í…ìŠ¤íŠ¸ & ë§ˆí¬ë‹¤ìš´ & ì½”ë“œ & ìˆ˜ì‹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.expander("1) í…ìŠ¤íŠ¸ Â· ë§ˆí¬ë‹¤ìš´ Â· ì½”ë“œ Â· ìˆ˜ì‹ ë³´ê¸°", expanded=True):
    st.markdown("""
- **êµµê²Œ**, *ê¸°ìš¸ì„*, `ì¸ë¼ì¸ ì½”ë“œ`ë¥¼ ì„ì–´ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì²´í¬ë¦¬ìŠ¤íŠ¸: 
  - [x] í…ìŠ¤íŠ¸
  - [x] ë§ˆí¬ë‹¤ìš´
  - [x] ì½”ë“œ
  - [x] ìˆ˜ì‹
""")
    # ì˜ˆì œ ì½”ë“œ(ë¬¸ìì—´ â†’ í•˜ì´ë¼ì´íŠ¸)
    sample = """\
def greet(name: str) -> str:
    return f"Hello, {name or 'Stranger'}!"

print(greet("Streamlit"))"""
    st.code(sample, language="python")

    st.markdown("---")
    st.markdown("ìˆ˜ì‹(LaTeX) ì˜ˆì‹œ â€” **ì´ì°¨ë°©ì •ì‹ í•´ ê³µì‹**:")
    st.latex(r"x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}")

    if show_tips:
        st.info("TIP) ë¬¸ì„œí˜• ì•ˆë‚´ëŠ” `st.markdown`, ì½”ë“œ í•˜ì´ë¼ì´íŠ¸ëŠ” `st.code`, ìˆ˜ì‹ì€ `st.latex`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 2) ì…ë ¥ ìœ„ì ¯ â†’ ì¦‰ì‹œ ë°˜ì˜
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.expander("2) ì…ë ¥ ìœ„ì ¯ê³¼ ì¦‰ì‹œ ë°˜ì˜", expanded=True):
    col1, col2, col3 = st.columns(3)

    with col1:
        n = st.number_input("í”¼ë³´ë‚˜ì¹˜ ê¸¸ì´", min_value=2, max_value=30, value=8, step=1)
    with col2:
        highlight = st.selectbox("ê°•ì¡° ìƒ‰ìƒ", ["blue", "green", "red", "violet"], index=0)
    with col3:
        show_code = st.toggle("ìƒì„± ì½”ë“œ ë³´ê¸°", value=False)

    # ê°„ë‹¨í•œ í”¼ë³´ë‚˜ì¹˜ ìƒì„±
    fib = [0, 1]
    for _ in range(int(n) - 2):
        fib.append(fib[-1] + fib[-2])

    st.markdown(f"**í”¼ë³´ë‚˜ì¹˜({n})**: :{highlight}[{fib}]")

    if show_code:
        st.code(
            "fib=[0,1]\nfor _ in range(n-2):\n    fib.append(fib[-1]+fib[-2])\n",
            language="python",
        )

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 3) íƒ­: í‘œ Â· ì°¨íŠ¸ Â· ìƒíƒœí‘œì‹œ
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
tab_table, tab_chart, tab_status = st.tabs(["ğŸ“‹ í‘œ", "ğŸ“ˆ ì°¨íŠ¸", "â³ ìƒíƒœí‘œì‹œ"])

with tab_table:
    df = pd.DataFrame({
        "index": np.arange(len(fib)),
        "value": fib
    })
    st.dataframe(df, use_container_width=True)
    st.metric("ë§ˆì§€ë§‰ ê°’", value=fib[-1], delta=fib[-1]-fib[-2])
    if show_tips:
        st.caption("`st.dataframe`ì€ ì •ë ¬/ìŠ¤í¬ë¡¤ ë“± ì¸í„°ë™ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤.")

with tab_chart:
    st.line_chart(df, x="index", y="value")
    st.caption("ê°„ë‹¨í•œ ì„ í˜• ì°¨íŠ¸ â€” ë°ì´í„°ê°€ ë°”ë€Œë©´ ì¦‰ì‹œ ê°±ì‹ ë©ë‹ˆë‹¤.")

with tab_status:
    st.write("í”„ë¡œê·¸ë ˆìŠ¤/ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜ˆì‹œ:")
    prog = st.progress(0, text="ì¤€ë¹„ ì¤‘â€¦")
    for i in range(1, 101):
        time.sleep(demo_speed)
        prog.progress(i, text=f"ì‹¤í–‰ ì¤‘â€¦ {i}%")
    st.success("ì™„ë£Œ!")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# 4) ìš”ì•½ & ë‹¤ìŒ ë‹¨ê³„
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.markdown("---")
st.subheader("ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ")
st.markdown("""
1. ì‚¬ì´ë“œë°”ì—ì„œ ì˜µì…˜ì„ ë°”ê¿”ë³´ë©° UI ë°˜ì‘ì„ ê´€ì°°í•˜ì„¸ìš”.
2. ì…ë ¥ ìœ„ì ¯ ê°’ì„ ì´ìš©í•´ **í”„ë¡¬í”„íŠ¸**(ì§€ì‹œë¬¸)ë¥¼ ë™ì ìœ¼ë¡œ êµ¬ì„±í•´ ë³´ì„¸ìš”.
3. ì´ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ OpenAI APIë¥¼ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ë§Œ ì¶”ê°€í•˜ë©´,
   ê°„ë‹¨í•œ ì±— UIê¹Œì§€ ë¹ ë¥´ê²Œ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
""")

if show_tips:
    st.warning("TIP) ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ” `.streamlit/secrets.toml` ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ API Keyë¥¼ ê´€ë¦¬í•˜ì„¸ìš”.")
